<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>NIYITEGEKA MARCEL</title>
    <link rel="stylesheet" href="assets/css/responsive.css">
    <link rel="stylesheet" href="assets/css/style.css">

    <script src="https://www.gstatic.com/firebasejs/7.21.1/firebase-app.js"></script>

    <script src="https://www.gstatic.com/firebasejs/7.21.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.21.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.21.1/firebase-storage.js"></script>



  </head>
  <body style="background-color: #E9E9E9">
    <div class="topnav">
      <div class="admin-logo">
        <h2>Admin panel</h2>
      </div>
      <div class="topnav-right">
        <h4>marcelniyi@gmail.com</h4>
        <a href="#" class="logout">
          <img src="assets/images/logout1.png" alt="logout">
        </a>

      </div>
    </div>

    <div class="admin-container">
      <div class="admin-leftnav">
      <div class="" style="position: fixed;">

        <div class="dash-logo">
          <a href="dashboard.html"><img src="assets/images/dashboard.svg" alt="dashboard"></a>
        </div>

        <div class="dash-logo">
          <a href="articles.html"><img src="assets/images/articles.svg" alt="dashboard"></a>
        </div>
        <div class="dash-logo">
          <a href="questions.html"><img src="assets/images/questions.svg" alt="dashboard"></a>
        </div>
        <div class="dash-logo">
          <a href="remainders.html"><img src="assets/images/remainder.svg" alt="dashboard"></a>
        </div>


      </div>
      </div>
      <div class="admin-space">

        <div class="containing">
          <div class="four-block">

            <div class="block">
              <a href="articles.html">
                <h3>Manage articles</h3>
                <h3>5</h3>
                <p>Total articles</p>
              </a>

            </div>

            <div class="block">
              <a href="questions.html">
                <h3>Manage questions</h3>
                <h3>5</h3>
                <p>Total questions</p>
              </a>

            </div>

            <div class="block">
              <a href="#">
                <h3>Manage remainders</h3>
                <h3>5</h3>
                <p>Total remainders</p>
              </a>

            </div>

            <div class="block">
              <a href="#">
                <h3>Total entry</h3>
                <h3 id="entries"></h3>

              </a>

            </div>

            <div class="block">
              <a href="users.html">
                <h3>Manage users</h3>
                <h3>5</h3>
                <p>Total users 4</p>

              </a>

            </div>



          </div>
          <div class="log-list">
            <h3>System logs</h3>



          </div>
        </div>


      </div>




    </div>
  </body>
  <script type="text/javascript" src="assets/js/adminConfig.js"></script>
  <script>



  document.querySelector(".topnav-right")
  document.querySelector('a[class=logout]').addEventListener('click', (e) => {
    e.preventDefault();
    firebase.auth().signOut().then(() => {
      localStorage.removeItem("users");
      localStorage.removeItem("user");
      window.location.href = "index.html";
    })
  });


const logList = document.querySelector(".log-list");

  db.collection("Login_history").where("user", "==", user).get().then((querySnapshot) => {
    let logins = 0;
      querySnapshot.forEach((doc) => {
        logins += 1;
          var date = new Date(doc.data().date.seconds * 1000);

          logList.innerHTML += "<h4><span>Loged in </span>"+date.getDate()+" - "+date.getMonth()+" - "+date.getFullYear()+" - "+date.getHours()+"</h4>"
      });

      // console.log("these are logins: "+ logins);
      document.getElementById("entries").innerHTML = logins;
  });

  </script>
</html>
